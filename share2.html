<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="모임 하러가요" />
    <meta property="og:image" content="https://thumb.pann.com/tc_240x152/https://fimg5.pann.com/new/download.jsp?FileID=67554129" />
    <meta property="og:description" content="러블리즈 단체로 놀뭐 나와서 각자 별명 말해주는 시간저는 핵주먹  저는 빵떡   저는 고라니  ♡ 저는 꽃이요 ♡  ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ 또 못 참고 과거로 돌아감ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ케이랑 유재석 사이엔 어떤 일이" />
    <title>모임 하러가요2</title>
</head>
<body>
    <div>v0.0.7</div>
    <div id="agent" style="color: red">agent</div>
    <div id="type" style="color: green">type</div>

    <script>
        var webUrl = 'https://m.nate.com';
        var urlScheme = 'meetup://meetdetail/5kLDQrZVDXB8V'
        var packageName = 'com.skcomms.android.ppazl'
        var aos = {
            intentScheme: 'intent://meetdetail/5kLDQoqn5#Intent;scheme=meetup;package='+ packageName +';end;',
            storeScheme: 'market://details?id=' + packageName
        }
        var ios = {
            store: 'http\x3A\x2F\x2Fitunes\x2Eapple\x2Ecom\x2Fkr\x2Fapp\x2Fkupang\x2Dcoupang\x2Fid454434967\x3Fmt\x3D8'
        }
        var initialTime = new Date().getTime();
        var device = checkDevice();

        if (device === 'android') {
            aosFunc()
        }

        function aosFunc() {
            function goAppWithFailedCallback(redirectFailedCallback) {
                if (typeof redirectFailedCallback !== 'function') {
                    redirectFailedCallback = function () { };
                }
                var startTime = new Date().getTime();
                let timeout = null;
                function cancelTimeout() {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                }
                timeout = setTimeout(function () {
                    window.removeEventListener('blur', cancelTimeout);
                    const currTime = new Date().getTime();
                    if (currTime - startTime < 1000) {
                        redirectFailedCallback();
                    }
                }, 500);
                window.addEventListener('blur', cancelTimeout, { once: true });
                setTimeout(function () {
                    location.href = aos.intentScheme;
                }, 32);
            }

            function goAppStore(startTime) {
                location.href = aos.storeScheme;
            }

            goAppWithFailedCallback(function () {
                location.href = webUrl;
            });

            document.querySelector('#goWeb').addEventListener('click', function () {
                location.href = webUrl;
            })

            document.querySelector('#goApp').addEventListener('click', function () {
                goAppWithFailedCallback(function () {
                    goAppStore();
                });
            })
        }
    </script>
</body>
</html>
